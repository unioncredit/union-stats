{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { useEffect as _useEffect2 } from \"react\";\nimport { useEffect as _useEffect } from \"react\";\nvar _jsxFileName = \"/Users/mathewstokes/Desktop/stats-app/components-ui/LoginOptions.js\";\nimport { Card, Button, Box, Label, Grid, Text } from \"@unioncredit/ui\";\nimport Chevron from \"@unioncredit/ui/lib/icons/chevron.svg\";\nimport { useRouter } from \"next/router\";\nimport useIsSanctioned from \"hooks/useIsSanctioned\";\nimport { UnsupportedChainIdError, useWeb3React } from \"@web3-react/core\";\nimport { WalletConnectConnector } from \"@web3-react/walletconnect-connector\";\nimport { useState } from \"react\";\nimport { getWalletDescription, getWalletIcon } from \"util/formatWalletDetails\";\nimport { login } from \"lib/auth\";\nimport styles from \"./loginOptions.module.css\";\n\nconst resetWalletConnector = connector => {\n  var _connector$walletConn, _connector$walletConn2;\n\n  if (connector && connector instanceof WalletConnectConnector && (_connector$walletConn = connector.walletConnectProvider) !== null && _connector$walletConn !== void 0 && (_connector$walletConn2 = _connector$walletConn.wc) !== null && _connector$walletConn2 !== void 0 && _connector$walletConn2.uri) {\n    connector.walletConnectProvider = undefined;\n  }\n};\n\nexport function LoginOptions({\n  triedEager\n}) {\n  const router = useRouter();\n  const isSanctioned = useIsSanctioned();\n  const {\n    activate,\n    error,\n    connector,\n    deactivate\n  } = useWeb3React();\n  const {\n    0: activatingConnector,\n    1: setActivatingConnector\n  } = useState();\n\n  _useEffect(() => {\n    if (activatingConnector && activatingConnector === connector) {\n      setActivatingConnector(undefined);\n    }\n  }, [activatingConnector, connector]);\n  /**\n   * Handle disconnecting from the wallet if an error occurs\n   */\n\n\n  _useEffect2(() => {\n    if (error) {\n      if (connector === walletconnect) connector.close();\n\n      if (!(error instanceof UnsupportedChainIdError)) {\n        deactivate();\n        setActivatingConnector(undefined);\n      }\n    }\n  }, [error, connector, deactivate]);\n\n  return /*#__PURE__*/_jsxDEV(Grid.Col, {\n    children: /*#__PURE__*/_jsxDEV(Box, {\n      fluid: true,\n      align: \"center\",\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        packed: true,\n        className: styles.outterCard,\n        children: [Object.keys(CONNECTORS).map((name, i) => {\n          var _window, _window2;\n\n          const currentConnector = CONNECTORS[name];\n          const activating = currentConnector === activatingConnector;\n          const connected = currentConnector === connector;\n          const disabled = Boolean(!triedEager || !!activatingConnector || connected || !!error || isSanctioned);\n\n          const handleSignIn = async () => {\n            setActivatingConnector(currentConnector);\n            await activate(CONNECTORS[name], undefined, false);\n            resetWalletConnector(CONNECTORS[name]);\n\n            if (name === \"MetaMask\") {\n              login();\n            }\n\n            if (router.pathname === \"/\") router.push(\"/credit\");\n          };\n\n          if (false && name === \"Injected\" && !((_window = window) !== null && _window !== void 0 && _window.ethereum || (_window2 = window) !== null && _window2 !== void 0 && _window2.web3)) {\n            return null;\n          }\n\n          return /*#__PURE__*/_jsxDEV(Card, {\n            my: \"6px\",\n            packed: true,\n            onClick: handleSignIn,\n            className: styles.innerCard,\n            children: /*#__PURE__*/_jsxDEV(Card.Body, {\n              children: /*#__PURE__*/_jsxDEV(Box, {\n                align: \"center\",\n                children: [/*#__PURE__*/_jsxDEV(Box, {\n                  justify: \"center\",\n                  mr: \"16px\",\n                  children: getWalletIcon(name)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 96,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Box, {\n                  direction: \"vertical\",\n                  children: [/*#__PURE__*/_jsxDEV(Text, {\n                    as: \"h3\",\n                    m: 0,\n                    grey: 800,\n                    children: name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 100,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Label, {\n                    as: \"p\",\n                    m: 0,\n                    children: getWalletDescription(name)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 103,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 99,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"lite\",\n                  icon: Chevron,\n                  loading: activating,\n                  disabled: disabled\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 107,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 95,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 17\n            }, this)\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 15\n          }, this);\n        }), /*#__PURE__*/_jsxDEV(Box, {\n          fluid: true,\n          align: \"center\",\n          justify: \"center\",\n          children: /*#__PURE__*/_jsxDEV(Label, {\n            as: \"p\",\n            size: \"small\",\n            align: \"center\",\n            mt: \"12px\",\n            mb: \"12px\",\n            maxw: \"300px\",\n            children: \"By connecting your wallet, you agree to Union\\u2019s Term\\u2019s & Conditions and Privacy Policy\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 5\n  }, this);\n}","map":{"version":3,"sources":["/Users/mathewstokes/Desktop/stats-app/components-ui/LoginOptions.js"],"names":["Card","Button","Box","Label","Grid","Text","Chevron","useRouter","useIsSanctioned","UnsupportedChainIdError","useWeb3React","WalletConnectConnector","useState","getWalletDescription","getWalletIcon","login","styles","resetWalletConnector","connector","walletConnectProvider","wc","uri","undefined","LoginOptions","triedEager","router","isSanctioned","activate","error","deactivate","activatingConnector","setActivatingConnector","walletconnect","close","outterCard","Object","keys","CONNECTORS","map","name","i","currentConnector","activating","connected","disabled","Boolean","handleSignIn","pathname","push","window","ethereum","web3","innerCard"],"mappings":"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","sourcesContent":["import { Card, Button, Box, Label, Grid, Text } from \"@unioncredit/ui\";\nimport Chevron from \"@unioncredit/ui/lib/icons/chevron.svg\";\nimport { useRouter } from \"next/router\";\nimport useIsSanctioned from \"hooks/useIsSanctioned\";\nimport { UnsupportedChainIdError, useWeb3React } from \"@web3-react/core\";\nimport { WalletConnectConnector } from \"@web3-react/walletconnect-connector\";\nimport { useState } from \"react\";\nimport { useAutoEffect } from \"hooks.macro\";\nimport { getWalletDescription, getWalletIcon } from \"util/formatWalletDetails\";\nimport { login } from \"lib/auth\";\nimport styles from \"./loginOptions.module.css\";\n\nconst resetWalletConnector = (connector) => {\n  if (\n    connector &&\n    connector instanceof WalletConnectConnector &&\n    connector.walletConnectProvider?.wc?.uri\n  ) {\n    connector.walletConnectProvider = undefined;\n  }\n};\n\nexport function LoginOptions({ triedEager }) {\n  const router = useRouter();\n  const isSanctioned = useIsSanctioned();\n  const { activate, error, connector, deactivate } = useWeb3React();\n  const [activatingConnector, setActivatingConnector] = useState();\n\n  useAutoEffect(() => {\n    if (activatingConnector && activatingConnector === connector) {\n      setActivatingConnector(undefined);\n    }\n  });\n\n  /**\n   * Handle disconnecting from the wallet if an error occurs\n   */\n  useAutoEffect(() => {\n    if (error) {\n      if (connector === walletconnect) connector.close();\n\n      if (!(error instanceof UnsupportedChainIdError)) {\n        deactivate();\n        setActivatingConnector(undefined);\n      }\n    }\n  });\n\n  return (\n    <Grid.Col>\n      <Box fluid align=\"center\">\n        <Card packed className={styles.outterCard}>\n          {Object.keys(CONNECTORS).map((name, i) => {\n            const currentConnector = CONNECTORS[name];\n            const activating = currentConnector === activatingConnector;\n            const connected = currentConnector === connector;\n            const disabled = Boolean(\n              !triedEager ||\n                !!activatingConnector ||\n                connected ||\n                !!error ||\n                isSanctioned\n            );\n\n            const handleSignIn = async () => {\n              setActivatingConnector(currentConnector);\n\n              await activate(CONNECTORS[name], undefined, false);\n              resetWalletConnector(CONNECTORS[name]);\n\n              if (name === \"MetaMask\") {\n                login();\n              }\n\n              if (router.pathname === \"/\") router.push(\"/credit\");\n            };\n\n            if (\n              typeof window !== \"undefined\" &&\n              name === \"Injected\" &&\n              !(window?.ethereum || window?.web3)\n            ) {\n              return null;\n            }\n\n            return (\n              <Card\n                my=\"6px\"\n                packed\n                key={i}\n                onClick={handleSignIn}\n                className={styles.innerCard}\n              >\n                <Card.Body>\n                  <Box align=\"center\">\n                    <Box justify=\"center\" mr=\"16px\">\n                      {getWalletIcon(name)}\n                    </Box>\n                    <Box direction=\"vertical\">\n                      <Text as=\"h3\" m={0} grey={800}>\n                        {name}\n                      </Text>\n                      <Label as=\"p\" m={0}>\n                        {getWalletDescription(name)}\n                      </Label>\n                    </Box>\n                    <Button\n                      variant=\"lite\"\n                      icon={Chevron}\n                      loading={activating}\n                      disabled={disabled}\n                    />\n                  </Box>\n                </Card.Body>\n              </Card>\n            );\n          })}\n          <Box fluid align=\"center\" justify=\"center\">\n            <Label\n              as=\"p\"\n              size=\"small\"\n              align=\"center\"\n              mt=\"12px\"\n              mb=\"12px\"\n              maxw=\"300px\"\n            >\n              By connecting your wallet, you agree to Union’s Term’s &\n              Conditions and Privacy Policy\n            </Label>\n          </Box>\n        </Card>\n      </Box>\n    </Grid.Col>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}