{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport _defineProperty from \"/Users/mathewstokes/Desktop/stats-app/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/Users/mathewstokes/Desktop/stats-app/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/mathewstokes/Desktop/stats-app/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/Users/mathewstokes/Desktop/stats-app/components-ui/BorrowStatsCard.js\",\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { BorrowModal, useBorrowModal, PaymentModal, usePaymentModal, usePaymentReminderModal, PaymentReminderModal } from \"components-ui/modals\";\nimport { Dai } from \"components-ui\";\nimport { Stat, Button, Grid, Card, Label, Tooltip } from \"@unioncredit/ui\";\nimport TooltipIcon from \"@unioncredit/ui/lib/icons/tooltip.svg\";\nimport format from \"util/formatValue\";\nimport { roundDown, roundUp } from \"util/numbers\";\nimport useBorrowData from \"hooks/data/useBorrowData\";\nimport useCreditLimit from \"hooks/data/useCreditLimit\";\nimport useVouchData from \"hooks/data/useVouchData\";\nimport styles from \"./BorrowStatsCard.module.css\";\nexport function BorrowStatsCard() {\n  _s();\n\n  var _useBorrowModal = useBorrowModal(),\n      isBorrowModalOpen = _useBorrowModal.isOpen,\n      openBorrowModal = _useBorrowModal.open;\n\n  var _usePaymentReminderMo = usePaymentReminderModal(),\n      isPaymentReminderModalOpen = _usePaymentReminderMo.isOpen,\n      openPaymentReminderModal = _usePaymentReminderMo.open;\n\n  var _usePaymentModal = usePaymentModal(),\n      isPaymentModalOpen = _usePaymentModal.isOpen,\n      openPaymentModal = _usePaymentModal.open;\n\n  var _useCreditLimit = useCreditLimit(),\n      _useCreditLimit$data = _useCreditLimit.data,\n      creditLimit = _useCreditLimit$data === void 0 ? 0 : _useCreditLimit$data,\n      updateCreditLimit = _useCreditLimit.mutate;\n\n  var _useBorrowData = useBorrowData(),\n      borrowData = _useBorrowData.data,\n      updateBorrowData = _useBorrowData.mutate;\n\n  var _useVouchData = useVouchData(),\n      vouchData = _useVouchData.data,\n      updateVouchData = _useVouchData.mutate;\n\n  var _ref = !!borrowData && borrowData,\n      _ref$borrowedRounded = _ref.borrowedRounded,\n      borrowedRounded = _ref$borrowedRounded === void 0 ? 0 : _ref$borrowedRounded,\n      _ref$interest = _ref.interest,\n      interest = _ref$interest === void 0 ? 0 : _ref$interest,\n      _ref$paymentDueDate = _ref.paymentDueDate,\n      paymentDueDate = _ref$paymentDueDate === void 0 ? \"-\" : _ref$paymentDueDate,\n      _ref$paymentPeriod = _ref.paymentPeriod,\n      paymentPeriod = _ref$paymentPeriod === void 0 ? \"-\" : _ref$paymentPeriod,\n      _ref$fee = _ref.fee,\n      fee = _ref$fee === void 0 ? 0 : _ref$fee,\n      _ref$isOverdue = _ref.isOverdue,\n      isOverdue = _ref$isOverdue === void 0 ? false : _ref$isOverdue;\n\n  var totalVouch = vouchData ? vouchData.reduce(function (acc, data) {\n    return acc + Number(data.vouched);\n  }, 0) : 0;\n  var unavailable = vouchData ? vouchData.reduce(function (acc, data) {\n    return acc + Number(data.vouched) - Number(data.available);\n  }, 0) : 0;\n\n  var onComplete = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return updateCreditLimit();\n\n            case 2:\n              _context.next = 4;\n              return updateVouchData();\n\n            case 4:\n              _context.next = 6;\n              return updateBorrowData();\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function onComplete() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Card, {\n      children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n        title: \"Borrow & Repay\",\n        align: \"center\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          divider: true,\n          children: /*#__PURE__*/_jsxDEV(Grid.Row, {\n            children: [/*#__PURE__*/_jsxDEV(Grid.Col, {\n              xs: 6,\n              children: [/*#__PURE__*/_jsxDEV(Stat, {\n                size: \"large\",\n                align: \"center\",\n                label: \"Available credit\",\n                value: /*#__PURE__*/_jsxDEV(Dai, {\n                  value: format(roundDown(creditLimit, 2))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 69,\n                  columnNumber: 26\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 65,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Stat, {\n                mt: \"24px\",\n                align: \"center\",\n                label: \"Vouch\",\n                value: /*#__PURE__*/_jsxDEV(Dai, {\n                  value: format(totalVouch, 2)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 75,\n                  columnNumber: 26\n                }, this),\n                after: /*#__PURE__*/_jsxDEV(Label, {\n                  m: 0,\n                  children: [format(unavailable, 2) || 0, \" DAI unavailable\", /*#__PURE__*/_jsxDEV(Tooltip, {\n                    content: \"These are funds which are currently tied up elsewhere and as a result, not available to borrow at this time\",\n                    children: /*#__PURE__*/_jsxDEV(TooltipIcon, {\n                      width: \"16px\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 80,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 79,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 77,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 71,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                mt: \"28px\",\n                label: \"Borrow funds\",\n                onClick: openBorrowModal\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 85,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Grid.Col, {\n              xs: 6,\n              children: [/*#__PURE__*/_jsxDEV(Stat, {\n                size: \"large\",\n                align: \"center\",\n                label: \"Balance owed\",\n                value: /*#__PURE__*/_jsxDEV(Dai, {\n                  value: borrowedRounded\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 96,\n                  columnNumber: 26\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 92,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Stat, {\n                align: \"center\",\n                label: \"Minimum due\",\n                mt: \"24px\",\n                value: /*#__PURE__*/_jsxDEV(Dai, {\n                  value: roundUp(interest)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 103,\n                  columnNumber: 26\n                }, this),\n                after: /*#__PURE__*/_jsxDEV(Label, {\n                  size: \"small\",\n                  color: \"blue500\",\n                  onClick: openPaymentReminderModal,\n                  className: styles.reminder,\n                  children: paymentDueDate\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 105,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 99,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                label: \"Make a payment\",\n                onClick: openPaymentModal,\n                variant: \"secondary\",\n                mt: \"28px\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 115,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), isBorrowModalOpen && /*#__PURE__*/_jsxDEV(BorrowModal, _objectSpread({}, {\n      fee: fee,\n      isOverdue: isOverdue,\n      creditLimit: creditLimit,\n      paymentDueDate: paymentDueDate,\n      paymentPeriod: paymentPeriod,\n      balanceOwed: borrowedRounded,\n      onComplete: onComplete\n    }), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 9\n    }, this), isPaymentModalOpen && /*#__PURE__*/_jsxDEV(PaymentModal, _objectSpread({}, {\n      paymentDueDate: paymentDueDate,\n      balanceOwed: borrowedRounded,\n      interest: interest,\n      onComplete: onComplete\n    }), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 9\n    }, this), isPaymentReminderModalOpen && /*#__PURE__*/_jsxDEV(PaymentReminderModal, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 38\n    }, this)]\n  }, void 0, true);\n}\n\n_s(BorrowStatsCard, \"rcNHRH2tcBTrnpc2PJ/iMJqCOHg=\", false, function () {\n  return [useBorrowModal, usePaymentReminderModal, usePaymentModal, useCreditLimit, useBorrowData, useVouchData];\n});\n\n_c = BorrowStatsCard;\n\nvar _c;\n\n$RefreshReg$(_c, \"BorrowStatsCard\");","map":{"version":3,"sources":["/Users/mathewstokes/Desktop/stats-app/components-ui/BorrowStatsCard.js"],"names":["BorrowModal","useBorrowModal","PaymentModal","usePaymentModal","usePaymentReminderModal","PaymentReminderModal","Dai","Stat","Button","Grid","Card","Label","Tooltip","TooltipIcon","format","roundDown","roundUp","useBorrowData","useCreditLimit","useVouchData","styles","BorrowStatsCard","isBorrowModalOpen","isOpen","openBorrowModal","open","isPaymentReminderModalOpen","openPaymentReminderModal","isPaymentModalOpen","openPaymentModal","data","creditLimit","updateCreditLimit","mutate","borrowData","updateBorrowData","vouchData","updateVouchData","borrowedRounded","interest","paymentDueDate","paymentPeriod","fee","isOverdue","totalVouch","reduce","acc","Number","vouched","unavailable","available","onComplete","reminder","balanceOwed"],"mappings":"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","sourcesContent":["import {\n  BorrowModal,\n  useBorrowModal,\n  PaymentModal,\n  usePaymentModal,\n  usePaymentReminderModal,\n  PaymentReminderModal,\n} from \"components-ui/modals\";\nimport { Dai } from \"components-ui\";\nimport { Stat, Button, Grid, Card, Label, Tooltip } from \"@unioncredit/ui\";\nimport TooltipIcon from \"@unioncredit/ui/lib/icons/tooltip.svg\";\nimport format from \"util/formatValue\";\nimport { roundDown, roundUp } from \"util/numbers\";\nimport useBorrowData from \"hooks/data/useBorrowData\";\nimport useCreditLimit from \"hooks/data/useCreditLimit\";\nimport useVouchData from \"hooks/data/useVouchData\";\n\nimport styles from \"./BorrowStatsCard.module.css\";\n\nexport function BorrowStatsCard() {\n  const { isOpen: isBorrowModalOpen, open: openBorrowModal } = useBorrowModal();\n  const { isOpen: isPaymentReminderModalOpen, open: openPaymentReminderModal } =\n    usePaymentReminderModal();\n  const { isOpen: isPaymentModalOpen, open: openPaymentModal } =\n    usePaymentModal();\n\n  const { data: creditLimit = 0, mutate: updateCreditLimit } = useCreditLimit();\n  const { data: borrowData, mutate: updateBorrowData } = useBorrowData();\n  const { data: vouchData, mutate: updateVouchData } = useVouchData();\n\n  const {\n    borrowedRounded = 0,\n    interest = 0,\n    paymentDueDate = \"-\",\n    paymentPeriod = \"-\",\n    fee = 0,\n    isOverdue = false,\n  } = !!borrowData && borrowData;\n\n  const totalVouch = vouchData\n    ? vouchData.reduce((acc, data) => acc + Number(data.vouched), 0)\n    : 0;\n\n  const unavailable = vouchData\n    ? vouchData.reduce(\n        (acc, data) => acc + Number(data.vouched) - Number(data.available),\n        0\n      )\n    : 0;\n\n  const onComplete = async () => {\n    await updateCreditLimit();\n    await updateVouchData();\n    await updateBorrowData();\n  };\n\n  return (\n    <>\n      <Card>\n        <Card.Header title=\"Borrow & Repay\" align=\"center\" />\n        <Card.Body>\n          <Grid divider>\n            <Grid.Row>\n              <Grid.Col xs={6}>\n                <Stat\n                  size=\"large\"\n                  align=\"center\"\n                  label=\"Available credit\"\n                  value={<Dai value={format(roundDown(creditLimit, 2))} />}\n                />\n                <Stat\n                  mt=\"24px\"\n                  align=\"center\"\n                  label=\"Vouch\"\n                  value={<Dai value={format(totalVouch, 2)} />}\n                  after={\n                    <Label m={0}>\n                      {format(unavailable, 2) || 0} DAI unavailable\n                      <Tooltip content=\"These are funds which are currently tied up elsewhere and as a result, not available to borrow at this time\">\n                        <TooltipIcon width=\"16px\" />\n                      </Tooltip>\n                    </Label>\n                  }\n                />\n                <Button\n                  mt=\"28px\"\n                  label=\"Borrow funds\"\n                  onClick={openBorrowModal}\n                />\n              </Grid.Col>\n              <Grid.Col xs={6}>\n                <Stat\n                  size=\"large\"\n                  align=\"center\"\n                  label=\"Balance owed\"\n                  value={<Dai value={borrowedRounded} />}\n                />\n\n                <Stat\n                  align=\"center\"\n                  label=\"Minimum due\"\n                  mt=\"24px\"\n                  value={<Dai value={roundUp(interest)} />}\n                  after={\n                    <Label\n                      size=\"small\"\n                      color=\"blue500\"\n                      onClick={openPaymentReminderModal}\n                      className={styles.reminder}\n                    >\n                      {paymentDueDate}\n                    </Label>\n                  }\n                />\n                <Button\n                  label=\"Make a payment\"\n                  onClick={openPaymentModal}\n                  variant=\"secondary\"\n                  mt=\"28px\"\n                />\n              </Grid.Col>\n            </Grid.Row>\n          </Grid>\n        </Card.Body>\n      </Card>\n      {isBorrowModalOpen && (\n        <BorrowModal\n          {...{\n            fee,\n            isOverdue,\n            creditLimit,\n            paymentDueDate,\n            paymentPeriod,\n            balanceOwed: borrowedRounded,\n            onComplete,\n          }}\n        />\n      )}\n      {isPaymentModalOpen && (\n        <PaymentModal\n          {...{\n            paymentDueDate,\n            balanceOwed: borrowedRounded,\n            interest,\n            onComplete,\n          }}\n        />\n      )}\n      {isPaymentReminderModalOpen && <PaymentReminderModal />}\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}