{"ast":null,"code":"import { useWeb3React } from \"@web3-react/core\";\nimport { Contract } from \"@ethersproject/contracts\";\nimport useCurrentToken from \"hooks/useCurrentToken\";\nimport { useCallback } from \"react\";\nimport USER_MANAGER_ABI from \"constants/abis/userManager.json\";\nimport useMarketRegistryContract from \"../contracts/useMarketRegistryContract\";\nexport default function useRemoveVouch() {\n  const {\n    account,\n    library\n  } = useWeb3React();\n  const tokenAddress = useCurrentToken();\n  const marketRegistryContract = useMarketRegistryContract();\n  return useCallback(async memberAddress => {\n    let gasLimit, userManagerContract;\n\n    try {\n      const signer = library.getSigner();\n      const res = await marketRegistryContract.tokens(tokenAddress);\n      const userManagerAddress = res.userManager;\n      userManagerContract = new Contract(userManagerAddress, USER_MANAGER_ABI, signer);\n      gasLimit = await userManagerContract.estimateGas.cancelVouch(account, memberAddress);\n    } catch (err) {\n      gasLimit = 300000;\n    }\n\n    return userManagerContract.cancelVouch(account, memberAddress, {\n      gasLimit\n    });\n  }, [account, library, tokenAddress, marketRegistryContract]);\n}","map":{"version":3,"sources":["/Users/mathewstokes/Desktop/stats-app/hooks/payables/useRemoveVouch.ts"],"names":["useWeb3React","Contract","useCurrentToken","useCallback","USER_MANAGER_ABI","useMarketRegistryContract","useRemoveVouch","account","library","tokenAddress","marketRegistryContract","memberAddress","gasLimit","userManagerContract","signer","getSigner","res","tokens","userManagerAddress","userManager","estimateGas","cancelVouch","err"],"mappings":"AACA,SAASA,YAAT,QAA6B,kBAA7B;AACA,SAASC,QAAT,QAAyB,0BAAzB;AACA,OAAOC,eAAP,MAA4B,uBAA5B;AACA,SAASC,WAAT,QAA4B,OAA5B;AACA,OAAOC,gBAAP,MAA6B,iCAA7B;AACA,OAAOC,yBAAP,MAAsC,wCAAtC;AAEA,eAAe,SAASC,cAAT,GAA0B;AACvC,QAAM;AAAEC,IAAAA,OAAF;AAAWC,IAAAA;AAAX,MAAuBR,YAAY,EAAzC;AACA,QAAMS,YAAY,GAAGP,eAAe,EAApC;AACA,QAAMQ,sBAAsB,GAAGL,yBAAyB,EAAxD;AAEA,SAAOF,WAAW,CAChB,MAAOQ,aAAP,IAA+D;AAC7D,QAAIC,QAAJ,EAAmBC,mBAAnB;;AACA,QAAI;AACF,YAAMC,MAAM,GAAGN,OAAO,CAACO,SAAR,EAAf;AACA,YAAMC,GAAG,GAAG,MAAMN,sBAAsB,CAACO,MAAvB,CAA8BR,YAA9B,CAAlB;AACA,YAAMS,kBAAkB,GAAGF,GAAG,CAACG,WAA/B;AACAN,MAAAA,mBAAmB,GAAG,IAAIZ,QAAJ,CACpBiB,kBADoB,EAEpBd,gBAFoB,EAGpBU,MAHoB,CAAtB;AAMAF,MAAAA,QAAQ,GAAG,MAAMC,mBAAmB,CAACO,WAApB,CAAgCC,WAAhC,CACfd,OADe,EAEfI,aAFe,CAAjB;AAID,KAdD,CAcE,OAAOW,GAAP,EAAY;AACZV,MAAAA,QAAQ,GAAG,MAAX;AACD;;AAED,WAAOC,mBAAmB,CAACQ,WAApB,CAAgCd,OAAhC,EAAyCI,aAAzC,EAAwD;AAC7DC,MAAAA;AAD6D,KAAxD,CAAP;AAGD,GAxBe,EAyBhB,CAACL,OAAD,EAAUC,OAAV,EAAmBC,YAAnB,EAAiCC,sBAAjC,CAzBgB,CAAlB;AA2BD","sourcesContent":["import type { TransactionResponse } from \"@ethersproject/providers\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport { Contract } from \"@ethersproject/contracts\";\nimport useCurrentToken from \"hooks/useCurrentToken\";\nimport { useCallback } from \"react\";\nimport USER_MANAGER_ABI from \"constants/abis/userManager.json\";\nimport useMarketRegistryContract from \"../contracts/useMarketRegistryContract\";\n\nexport default function useRemoveVouch() {\n  const { account, library } = useWeb3React();\n  const tokenAddress = useCurrentToken();\n  const marketRegistryContract = useMarketRegistryContract();\n\n  return useCallback(\n    async (memberAddress: string): Promise<TransactionResponse> => {\n      let gasLimit: any, userManagerContract: Contract;\n      try {\n        const signer = library.getSigner();\n        const res = await marketRegistryContract.tokens(tokenAddress);\n        const userManagerAddress = res.userManager;\n        userManagerContract = new Contract(\n          userManagerAddress,\n          USER_MANAGER_ABI,\n          signer\n        );\n\n        gasLimit = await userManagerContract.estimateGas.cancelVouch(\n          account,\n          memberAddress\n        );\n      } catch (err) {\n        gasLimit = 300000;\n      }\n\n      return userManagerContract.cancelVouch(account, memberAddress, {\n        gasLimit,\n      });\n    },\n    [account, library, tokenAddress, marketRegistryContract]\n  );\n}\n"]},"metadata":{},"sourceType":"module"}