{"ast":null,"code":"import _regeneratorRuntime from \"/Users/mathewstokes/Desktop/stats-app/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/mathewstokes/Desktop/stats-app/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _s = $RefreshSig$();\n\nimport { useWeb3React } from \"@web3-react/core\";\nimport { Contract } from \"@ethersproject/contracts\";\nimport useCurrentToken from \"hooks/useCurrentToken\";\nimport { useCallback } from \"react\";\nimport USER_MANAGER_ABI from \"constants/abis/userManager.json\";\nimport useMarketRegistryContract from \"../contracts/useMarketRegistryContract\";\nexport default function useRemoveVouch() {\n  _s();\n\n  var _useWeb3React = useWeb3React(),\n      account = _useWeb3React.account,\n      library = _useWeb3React.library;\n\n  var tokenAddress = useCurrentToken();\n  var marketRegistryContract = useMarketRegistryContract();\n  return useCallback( /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(memberAddress) {\n      var gasLimit, userManagerContract, signer, res, userManagerAddress;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              signer = library.getSigner();\n              _context.next = 4;\n              return marketRegistryContract.tokens(tokenAddress);\n\n            case 4:\n              res = _context.sent;\n              userManagerAddress = res.userManager;\n              userManagerContract = new Contract(userManagerAddress, USER_MANAGER_ABI, signer);\n              _context.next = 9;\n              return userManagerContract.estimateGas.cancelVouch(account, memberAddress);\n\n            case 9:\n              gasLimit = _context.sent;\n              _context.next = 15;\n              break;\n\n            case 12:\n              _context.prev = 12;\n              _context.t0 = _context[\"catch\"](0);\n              gasLimit = 300000;\n\n            case 15:\n              return _context.abrupt(\"return\", userManagerContract.cancelVouch(account, memberAddress, {\n                gasLimit: gasLimit\n              }));\n\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 12]]);\n    }));\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }(), [account, library, tokenAddress, marketRegistryContract]);\n}\n\n_s(useRemoveVouch, \"tbh+BBxq4+bXwu8TfNtXhvM0/uQ=\", false, function () {\n  return [useWeb3React, useCurrentToken, useMarketRegistryContract];\n});","map":{"version":3,"sources":["/Users/mathewstokes/Desktop/stats-app/hooks/payables/useRemoveVouch.ts"],"names":["useWeb3React","Contract","useCurrentToken","useCallback","USER_MANAGER_ABI","useMarketRegistryContract","useRemoveVouch","account","library","tokenAddress","marketRegistryContract","memberAddress","signer","getSigner","tokens","res","userManagerAddress","userManager","userManagerContract","estimateGas","cancelVouch","gasLimit"],"mappings":";;;;;AACA,SAASA,YAAT,QAA6B,kBAA7B;AACA,SAASC,QAAT,QAAyB,0BAAzB;AACA,OAAOC,eAAP,MAA4B,uBAA5B;AACA,SAASC,WAAT,QAA4B,OAA5B;AACA,OAAOC,gBAAP,MAA6B,iCAA7B;AACA,OAAOC,yBAAP,MAAsC,wCAAtC;AAEA,eAAe,SAASC,cAAT,GAA0B;AAAA;;AAAA,sBACVN,YAAY,EADF;AAAA,MAC/BO,OAD+B,iBAC/BA,OAD+B;AAAA,MACtBC,OADsB,iBACtBA,OADsB;;AAEvC,MAAMC,YAAY,GAAGP,eAAe,EAApC;AACA,MAAMQ,sBAAsB,GAAGL,yBAAyB,EAAxD;AAEA,SAAOF,WAAW;AAAA,wEAChB,iBAAOQ,aAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGUC,cAAAA,MAHV,GAGmBJ,OAAO,CAACK,SAAR,EAHnB;AAAA;AAAA,qBAIsBH,sBAAsB,CAACI,MAAvB,CAA8BL,YAA9B,CAJtB;;AAAA;AAIUM,cAAAA,GAJV;AAKUC,cAAAA,kBALV,GAK+BD,GAAG,CAACE,WALnC;AAMIC,cAAAA,mBAAmB,GAAG,IAAIjB,QAAJ,CACpBe,kBADoB,EAEpBZ,gBAFoB,EAGpBQ,MAHoB,CAAtB;AANJ;AAAA,qBAYqBM,mBAAmB,CAACC,WAApB,CAAgCC,WAAhC,CACfb,OADe,EAEfI,aAFe,CAZrB;;AAAA;AAYIU,cAAAA,QAZJ;AAAA;AAAA;;AAAA;AAAA;AAAA;AAiBIA,cAAAA,QAAQ,GAAG,MAAX;;AAjBJ;AAAA,+CAoBSH,mBAAmB,CAACE,WAApB,CAAgCb,OAAhC,EAAyCI,aAAzC,EAAwD;AAC7DU,gBAAAA,QAAQ,EAARA;AAD6D,eAAxD,CApBT;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KADgB;;AAAA;AAAA;AAAA;AAAA,OAyBhB,CAACd,OAAD,EAAUC,OAAV,EAAmBC,YAAnB,EAAiCC,sBAAjC,CAzBgB,CAAlB;AA2BD;;GAhCuBJ,c;UACON,Y,EACRE,e,EACUG,yB","sourcesContent":["import type { TransactionResponse } from \"@ethersproject/providers\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport { Contract } from \"@ethersproject/contracts\";\nimport useCurrentToken from \"hooks/useCurrentToken\";\nimport { useCallback } from \"react\";\nimport USER_MANAGER_ABI from \"constants/abis/userManager.json\";\nimport useMarketRegistryContract from \"../contracts/useMarketRegistryContract\";\n\nexport default function useRemoveVouch() {\n  const { account, library } = useWeb3React();\n  const tokenAddress = useCurrentToken();\n  const marketRegistryContract = useMarketRegistryContract();\n\n  return useCallback(\n    async (memberAddress: string): Promise<TransactionResponse> => {\n      let gasLimit: any, userManagerContract: Contract;\n      try {\n        const signer = library.getSigner();\n        const res = await marketRegistryContract.tokens(tokenAddress);\n        const userManagerAddress = res.userManager;\n        userManagerContract = new Contract(\n          userManagerAddress,\n          USER_MANAGER_ABI,\n          signer\n        );\n\n        gasLimit = await userManagerContract.estimateGas.cancelVouch(\n          account,\n          memberAddress\n        );\n      } catch (err) {\n        gasLimit = 300000;\n      }\n\n      return userManagerContract.cancelVouch(account, memberAddress, {\n        gasLimit,\n      });\n    },\n    [account, library, tokenAddress, marketRegistryContract]\n  );\n}\n"]},"metadata":{},"sourceType":"module"}