{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/mathewstokes/Desktop/stats-app/components-ui/TransactionHistory.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { Text, Table, TableCell, TableRow, Label, Box, Skeleton, Pagination, EmptyState } from \"@unioncredit/ui\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport { Dai } from \"components-ui\";\nimport usePagination from \"hooks/usePagination\";\nimport createArray from \"util/createArray\";\nimport format from \"util/formatValue\";\nimport formatDateTime from \"util/formatDateTime\";\nimport truncateName from \"util/truncateName\";\nimport Borrow from \"@unioncredit/ui/lib/icons/borrow.svg\";\nimport Repayment from \"@unioncredit/ui/lib/icons/repayment.svg\";\nimport NewMember from \"@unioncredit/ui/lib/icons/newMember.svg\";\nimport NewVouch from \"@unioncredit/ui/lib/icons/newVouch.svg\";\nimport NewVouchRecieved from \"@unioncredit/ui/lib/icons/newVouchRecieved.svg\";\nimport CancelledVouch from \"@unioncredit/ui/lib/icons/cancelVouch.svg\";\nimport { TransactionTypes } from \"constants/app\";\nimport usePublicData from \"hooks/usePublicData\";\nconst icons = {\n  [TransactionTypes.CANCEL]: CancelledVouch,\n  [TransactionTypes.BORROW]: Borrow,\n  [TransactionTypes.REPAY]: Repayment,\n  [TransactionTypes.TRUST]: NewVouch,\n  [TransactionTypes.TRUSTED]: NewVouchRecieved,\n  [TransactionTypes.REGISTER]: NewMember\n};\nconst texts = {\n  [TransactionTypes.CANCEL]: ({\n    borrowerName\n  }) => `Cancelled ${borrowerName}`,\n  [TransactionTypes.BORROW]: () => \"Borrow\",\n  [TransactionTypes.REPAY]: () => \"Repayment\",\n  [TransactionTypes.TRUST]: ({\n    borrowerName\n  }) => `Trusted ${borrowerName}`,\n  [TransactionTypes.TRUSTED]: ({\n    stakerName\n  }) => `Trusted by ${stakerName}`,\n  [TransactionTypes.REGISTER]: () => \"Became a member\"\n};\n\nconst parseName = (account, address, ENSName) => {\n  return (account === null || account === void 0 ? void 0 : account.toLowerCase()) === (address === null || address === void 0 ? void 0 : address.toLowerCase()) ? \"You\" : ENSName || (address === null || address === void 0 ? void 0 : address.slice(0, 6));\n};\n\nfunction TransactionHistoryRow({\n  amount,\n  type,\n  timestamp,\n  borrower,\n  staker\n}) {\n  var _texts$type;\n\n  const {\n    account\n  } = useWeb3React();\n  const {\n    ENSName: borrowerENS\n  } = usePublicData(borrower);\n  const {\n    ENSName: stakerENS\n  } = usePublicData(staker);\n  const borrowerName = parseName(account, borrower, borrowerENS);\n  const stakerName = parseName(account, staker, stakerENS);\n  const Icon = icons[type];\n  const text = (_texts$type = texts[type]) === null || _texts$type === void 0 ? void 0 : _texts$type.call(texts, {\n    amount,\n    type,\n    borrowerName: truncateName(borrowerName),\n    stakerName: truncateName(stakerName)\n  });\n\n  if (!Icon || !text) {\n    return null;\n  }\n\n  return /*#__PURE__*/_jsxDEV(TableRow, {\n    children: [/*#__PURE__*/_jsxDEV(TableCell, {\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        align: \"center\",\n        children: [/*#__PURE__*/_jsxDEV(Icon, {\n          width: \"24px\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          direction: \"vertical\",\n          children: [/*#__PURE__*/_jsxDEV(Label, {\n            as: \"p\",\n            ml: \"8px\",\n            grey: 700,\n            mb: 0,\n            children: text\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Label, {\n            as: \"p\",\n            ml: \"8px\",\n            size: \"small\",\n            className: \"hide-gt-600\",\n            grey: 400,\n            children: formatDateTime(timestamp)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n      className: \"hide-lt-600\",\n      children: /*#__PURE__*/_jsxDEV(Label, {\n        as: \"p\",\n        size: \"small\",\n        grey: 400,\n        children: formatDateTime(timestamp)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n      align: \"right\",\n      children: amount && /*#__PURE__*/_jsxDEV(Text, {\n        grey: 700,\n        children: /*#__PURE__*/_jsxDEV(Dai, {\n          value: format(amount, 2)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n}\n\nfunction TransactionHistorySkeletonRow() {\n  return /*#__PURE__*/_jsxDEV(TableRow, {\n    children: [/*#__PURE__*/_jsxDEV(TableCell, {\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        align: \"center\",\n        children: [/*#__PURE__*/_jsxDEV(Skeleton, {\n          shimmer: true,\n          variant: \"circle\",\n          size: 24,\n          grey: 200\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Skeleton, {\n          shimmer: true,\n          width: 60,\n          height: 10,\n          grey: 200,\n          ml: \"6px\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n      children: /*#__PURE__*/_jsxDEV(Skeleton, {\n        shimmer: true,\n        width: 80,\n        height: 10,\n        grey: 200\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n      align: \"right\",\n      children: /*#__PURE__*/_jsxDEV(Skeleton, {\n        shimmer: true,\n        width: 30,\n        height: 10,\n        grey: 200\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 115,\n    columnNumber: 5\n  }, this);\n}\n\nfunction TransactionHistoryEmpty() {\n  return /*#__PURE__*/_jsxDEV(EmptyState, {\n    label: \"No transactions\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 133,\n    columnNumber: 10\n  }, this);\n}\n\nexport function TransactionHistory({\n  data\n}) {\n  const {\n    data: pagedData,\n    page,\n    maxPages,\n    setPage\n  } = usePagination(data);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Table, {\n      disableCondensed: true,\n      children: [(data === null || data === void 0 ? void 0 : data.length) <= 0 && /*#__PURE__*/_jsxDEV(TransactionHistoryEmpty, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 31\n      }, this), pagedData.map((tx, i) => /*#__PURE__*/_jsxDEV(TransactionHistoryRow, _objectSpread({}, tx), i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 11\n      }, this)), !data && createArray(3).map((_, i) => /*#__PURE__*/_jsxDEV(TransactionHistorySkeletonRow, {}, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 13\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Pagination, {\n      mt: \"24px\",\n      pages: maxPages,\n      activePage: page,\n      onClick: setPage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}","map":{"version":3,"sources":["/Users/mathewstokes/Desktop/stats-app/components-ui/TransactionHistory.js"],"names":["Text","Table","TableCell","TableRow","Label","Box","Skeleton","Pagination","EmptyState","useWeb3React","Dai","usePagination","createArray","format","formatDateTime","truncateName","Borrow","Repayment","NewMember","NewVouch","NewVouchRecieved","CancelledVouch","TransactionTypes","usePublicData","icons","CANCEL","BORROW","REPAY","TRUST","TRUSTED","REGISTER","texts","borrowerName","stakerName","parseName","account","address","ENSName","toLowerCase","slice","TransactionHistoryRow","amount","type","timestamp","borrower","staker","borrowerENS","stakerENS","Icon","text","TransactionHistorySkeletonRow","TransactionHistoryEmpty","TransactionHistory","data","pagedData","page","maxPages","setPage","length","map","tx","i","_"],"mappings":"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","sourcesContent":["import {\n  Text,\n  Table,\n  TableCell,\n  TableRow,\n  Label,\n  Box,\n  Skeleton,\n  Pagination,\n  EmptyState,\n} from \"@unioncredit/ui\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport { Dai } from \"components-ui\";\nimport usePagination from \"hooks/usePagination\";\nimport createArray from \"util/createArray\";\nimport format from \"util/formatValue\";\nimport formatDateTime from \"util/formatDateTime\";\nimport truncateName from \"util/truncateName\";\n\nimport Borrow from \"@unioncredit/ui/lib/icons/borrow.svg\";\nimport Repayment from \"@unioncredit/ui/lib/icons/repayment.svg\";\nimport NewMember from \"@unioncredit/ui/lib/icons/newMember.svg\";\nimport NewVouch from \"@unioncredit/ui/lib/icons/newVouch.svg\";\nimport NewVouchRecieved from \"@unioncredit/ui/lib/icons/newVouchRecieved.svg\";\nimport CancelledVouch from \"@unioncredit/ui/lib/icons/cancelVouch.svg\";\n\nimport { TransactionTypes } from \"constants/app\";\nimport usePublicData from \"hooks/usePublicData\";\n\nconst icons = {\n  [TransactionTypes.CANCEL]: CancelledVouch,\n  [TransactionTypes.BORROW]: Borrow,\n  [TransactionTypes.REPAY]: Repayment,\n  [TransactionTypes.TRUST]: NewVouch,\n  [TransactionTypes.TRUSTED]: NewVouchRecieved,\n  [TransactionTypes.REGISTER]: NewMember,\n};\n\nconst texts = {\n  [TransactionTypes.CANCEL]: ({ borrowerName }) => `Cancelled ${borrowerName}`,\n  [TransactionTypes.BORROW]: () => \"Borrow\",\n  [TransactionTypes.REPAY]: () => \"Repayment\",\n  [TransactionTypes.TRUST]: ({ borrowerName }) => `Trusted ${borrowerName}`,\n  [TransactionTypes.TRUSTED]: ({ stakerName }) => `Trusted by ${stakerName}`,\n  [TransactionTypes.REGISTER]: () => \"Became a member\",\n};\n\nconst parseName = (account, address, ENSName) => {\n  return account?.toLowerCase() === address?.toLowerCase()\n    ? \"You\"\n    : ENSName || address?.slice(0, 6);\n};\nfunction TransactionHistoryRow({ amount, type, timestamp, borrower, staker }) {\n  const { account } = useWeb3React();\n\n  const { ENSName: borrowerENS } = usePublicData(borrower);\n  const { ENSName: stakerENS } = usePublicData(staker);\n\n  const borrowerName = parseName(account, borrower, borrowerENS);\n  const stakerName = parseName(account, staker, stakerENS);\n\n  const Icon = icons[type];\n\n  const text = texts[type]?.({\n    amount,\n    type,\n    borrowerName: truncateName(borrowerName),\n    stakerName: truncateName(stakerName),\n  });\n\n  if (!Icon || !text) {\n    return null;\n  }\n\n  return (\n    <TableRow>\n      <TableCell>\n        <Box align=\"center\">\n          <Icon width=\"24px\" />\n          <Box direction=\"vertical\">\n            <Label as=\"p\" ml=\"8px\" grey={700} mb={0}>\n              {text}\n            </Label>\n            <Label\n              as=\"p\"\n              ml=\"8px\"\n              size=\"small\"\n              className=\"hide-gt-600\"\n              grey={400}\n            >\n              {formatDateTime(timestamp)}\n            </Label>\n          </Box>\n        </Box>\n      </TableCell>\n      <TableCell className=\"hide-lt-600\">\n        <Label as=\"p\" size=\"small\" grey={400}>\n          {formatDateTime(timestamp)}\n        </Label>\n      </TableCell>\n\n      <TableCell align=\"right\">\n        {amount && (\n          <Text grey={700}>\n            <Dai value={format(amount, 2)} />\n          </Text>\n        )}\n      </TableCell>\n    </TableRow>\n  );\n}\n\nfunction TransactionHistorySkeletonRow() {\n  return (\n    <TableRow>\n      <TableCell>\n        <Box align=\"center\">\n          <Skeleton shimmer variant=\"circle\" size={24} grey={200} />\n          <Skeleton shimmer width={60} height={10} grey={200} ml=\"6px\" />\n        </Box>\n      </TableCell>\n      <TableCell>\n        <Skeleton shimmer width={80} height={10} grey={200} />\n      </TableCell>\n      <TableCell align=\"right\">\n        <Skeleton shimmer width={30} height={10} grey={200} />\n      </TableCell>\n    </TableRow>\n  );\n}\n\nfunction TransactionHistoryEmpty() {\n  return <EmptyState label=\"No transactions\" />;\n}\n\nexport function TransactionHistory({ data }) {\n  const { data: pagedData, page, maxPages, setPage } = usePagination(data);\n\n  return (\n    <>\n      <Table disableCondensed>\n        {data?.length <= 0 && <TransactionHistoryEmpty />}\n\n        {pagedData.map((tx, i) => (\n          <TransactionHistoryRow key={i} {...tx} />\n        ))}\n\n        {!data &&\n          createArray(3).map((_, i) => (\n            <TransactionHistorySkeletonRow key={i} />\n          ))}\n      </Table>\n\n      <Pagination\n        mt=\"24px\"\n        pages={maxPages}\n        activePage={page}\n        onClick={setPage}\n      />\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}