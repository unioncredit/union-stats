{"ast":null,"code":"import { parseUnits } from \"@ethersproject/units\";\nimport useCurrentToken from \"hooks/useCurrentToken\";\nimport { useCallback } from \"react\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport { Contract } from \"@ethersproject/contracts\";\nimport USER_MANAGER_ABI from \"constants/abis/userManager.json\";\nimport useMarketRegistryContract from \"../contracts/useMarketRegistryContract\";\nexport default function useWriteOffDebt() {\n  const tokenAddress = useCurrentToken();\n  const {\n    library\n  } = useWeb3React();\n  const marketRegistryContract = useMarketRegistryContract();\n  return useCallback(async (memberAddress, amount) => {\n    const writeOffAmount = parseUnits(String(amount), 18);\n    let gasLimit, userManagerContract;\n\n    try {\n      const signer = library.getSigner();\n      const res = await marketRegistryContract.tokens(tokenAddress);\n      const userManagerAddress = res.userManager;\n      userManagerContract = new Contract(userManagerAddress, USER_MANAGER_ABI, signer);\n      gasLimit = await userManagerContract.estimateGas.debtWriteOff(memberAddress, writeOffAmount.toString());\n    } catch (err) {\n      gasLimit = 300000;\n    }\n\n    return userManagerContract.debtWriteOff(memberAddress, writeOffAmount.toString(), {\n      gasLimit\n    });\n  }, [library, marketRegistryContract, tokenAddress]);\n}","map":{"version":3,"sources":["/Users/mathewstokes/Desktop/stats-app/hooks/payables/useWriteOffDebt.js"],"names":["parseUnits","useCurrentToken","useCallback","useWeb3React","Contract","USER_MANAGER_ABI","useMarketRegistryContract","useWriteOffDebt","tokenAddress","library","marketRegistryContract","memberAddress","amount","writeOffAmount","String","gasLimit","userManagerContract","signer","getSigner","res","tokens","userManagerAddress","userManager","estimateGas","debtWriteOff","toString","err"],"mappings":"AAAA,SAASA,UAAT,QAA2B,sBAA3B;AACA,OAAOC,eAAP,MAA4B,uBAA5B;AACA,SAASC,WAAT,QAA4B,OAA5B;AACA,SAASC,YAAT,QAA6B,kBAA7B;AACA,SAASC,QAAT,QAAyB,0BAAzB;AACA,OAAOC,gBAAP,MAA6B,iCAA7B;AACA,OAAOC,yBAAP,MAAsC,wCAAtC;AAEA,eAAe,SAASC,eAAT,GAA2B;AACxC,QAAMC,YAAY,GAAGP,eAAe,EAApC;AACA,QAAM;AAAEQ,IAAAA;AAAF,MAAcN,YAAY,EAAhC;AACA,QAAMO,sBAAsB,GAAGJ,yBAAyB,EAAxD;AAEA,SAAOJ,WAAW,CAChB,OAAOS,aAAP,EAAsBC,MAAtB,KAAiC;AAC/B,UAAMC,cAAc,GAAGb,UAAU,CAACc,MAAM,CAACF,MAAD,CAAP,EAAiB,EAAjB,CAAjC;AAEA,QAAIG,QAAJ,EAAcC,mBAAd;;AAEA,QAAI;AACF,YAAMC,MAAM,GAAGR,OAAO,CAACS,SAAR,EAAf;AACA,YAAMC,GAAG,GAAG,MAAMT,sBAAsB,CAACU,MAAvB,CAA8BZ,YAA9B,CAAlB;AACA,YAAMa,kBAAkB,GAAGF,GAAG,CAACG,WAA/B;AACAN,MAAAA,mBAAmB,GAAG,IAAIZ,QAAJ,CACpBiB,kBADoB,EAEpBhB,gBAFoB,EAGpBY,MAHoB,CAAtB;AAMAF,MAAAA,QAAQ,GAAG,MAAMC,mBAAmB,CAACO,WAApB,CAAgCC,YAAhC,CACfb,aADe,EAEfE,cAAc,CAACY,QAAf,EAFe,CAAjB;AAID,KAdD,CAcE,OAAOC,GAAP,EAAY;AACZX,MAAAA,QAAQ,GAAG,MAAX;AACD;;AAED,WAAOC,mBAAmB,CAACQ,YAApB,CACLb,aADK,EAELE,cAAc,CAACY,QAAf,EAFK,EAGL;AACEV,MAAAA;AADF,KAHK,CAAP;AAOD,GA/Be,EAgChB,CAACN,OAAD,EAAUC,sBAAV,EAAkCF,YAAlC,CAhCgB,CAAlB;AAkCD","sourcesContent":["import { parseUnits } from \"@ethersproject/units\";\nimport useCurrentToken from \"hooks/useCurrentToken\";\nimport { useCallback } from \"react\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport { Contract } from \"@ethersproject/contracts\";\nimport USER_MANAGER_ABI from \"constants/abis/userManager.json\";\nimport useMarketRegistryContract from \"../contracts/useMarketRegistryContract\";\n\nexport default function useWriteOffDebt() {\n  const tokenAddress = useCurrentToken();\n  const { library } = useWeb3React();\n  const marketRegistryContract = useMarketRegistryContract();\n\n  return useCallback(\n    async (memberAddress, amount) => {\n      const writeOffAmount = parseUnits(String(amount), 18);\n\n      let gasLimit, userManagerContract;\n\n      try {\n        const signer = library.getSigner();\n        const res = await marketRegistryContract.tokens(tokenAddress);\n        const userManagerAddress = res.userManager;\n        userManagerContract = new Contract(\n          userManagerAddress,\n          USER_MANAGER_ABI,\n          signer\n        );\n\n        gasLimit = await userManagerContract.estimateGas.debtWriteOff(\n          memberAddress,\n          writeOffAmount.toString()\n        );\n      } catch (err) {\n        gasLimit = 300000;\n      }\n\n      return userManagerContract.debtWriteOff(\n        memberAddress,\n        writeOffAmount.toString(),\n        {\n          gasLimit,\n        }\n      );\n    },\n    [library, marketRegistryContract, tokenAddress]\n  );\n}\n"]},"metadata":{},"sourceType":"module"}