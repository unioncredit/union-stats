{"ast":null,"code":"import _regeneratorRuntime from \"/Users/mathewstokes/Desktop/stats-app/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _defineProperty from \"/Users/mathewstokes/Desktop/stats-app/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"/Users/mathewstokes/Desktop/stats-app/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/mathewstokes/Desktop/stats-app/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useLocalStorage } from \"react-use\";\nimport useSWR from \"swr\";\n\nvar fetcher = function fetcher() {\n  var raw = localStorage.getItem(\"labels\");\n  return JSON.parse(raw);\n};\n\nexport default function useAddressLabels() {\n  _s();\n\n  var _useSWR = useSWR(\"labels\", fetcher),\n      data = _useSWR.data,\n      mutate = _useSWR.mutate;\n\n  var _useLocalStorage = useLocalStorage(\"labels\", {}),\n      _useLocalStorage2 = _slicedToArray(_useLocalStorage, 2),\n      setValue = _useLocalStorage2[1];\n  /**\n   * @name setLabel\n   * @param {String} address\n   * @param {String} label\n   */\n\n\n  var setLabel = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(address, label) {\n      var key, curData;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (address) {\n                _context.next = 2;\n                break;\n              }\n\n              return _context.abrupt(\"return\");\n\n            case 2:\n              key = address.toLowerCase();\n\n              if (label) {\n                _context.next = 11;\n                break;\n              }\n\n              setValue(function (current) {\n                var cur = current;\n                delete cur[key];\n                return cur;\n              });\n              curData = data;\n              delete curData[key];\n              _context.next = 9;\n              return mutate(curData);\n\n            case 9:\n              _context.next = 14;\n              break;\n\n            case 11:\n              setValue(function (current) {\n                return _objectSpread(_objectSpread({}, current), {}, _defineProperty({}, key, label));\n              });\n              _context.next = 14;\n              return mutate(_objectSpread(_objectSpread({}, data), {}, _defineProperty({}, key, label)));\n\n            case 14:\n              _context.next = 16;\n              return mutate();\n\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function setLabel(_x, _x2) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  /**\n   * @name getLabel\n   * @param {String} address\n   * @returns {String|undefined}\n   */\n\n\n  var getLabel = function getLabel(address) {\n    if (!address) return;\n    var key = address.toLowerCase();\n    if (data && Object.prototype.hasOwnProperty.call(data, key)) return data[key];\n    return undefined;\n  };\n\n  return {\n    labels: data,\n    setLabel: setLabel,\n    getLabel: getLabel\n  };\n}\n\n_s(useAddressLabels, \"H8ztZVb/NG2TVG47ppW8Fm7UpZ4=\", false, function () {\n  return [useSWR, useLocalStorage];\n});","map":{"version":3,"sources":["/Users/mathewstokes/Desktop/stats-app/hooks/useAddressLabels.js"],"names":["useLocalStorage","useSWR","fetcher","raw","localStorage","getItem","JSON","parse","useAddressLabels","data","mutate","setValue","setLabel","address","label","key","toLowerCase","current","cur","curData","getLabel","Object","prototype","hasOwnProperty","call","undefined","labels"],"mappings":";;;;;;;;;;;AAAA,SAASA,eAAT,QAAgC,WAAhC;AACA,OAAOC,MAAP,MAAmB,KAAnB;;AAEA,IAAMC,OAAO,GAAG,SAAVA,OAAU,GAAM;AACpB,MAAMC,GAAG,GAAGC,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAZ;AACA,SAAOC,IAAI,CAACC,KAAL,CAAWJ,GAAX,CAAP;AACD,CAHD;;AAKA,eAAe,SAASK,gBAAT,GAA4B;AAAA;;AAAA,gBAChBP,MAAM,CAAC,QAAD,EAAWC,OAAX,CADU;AAAA,MACjCO,IADiC,WACjCA,IADiC;AAAA,MAC3BC,MAD2B,WAC3BA,MAD2B;;AAAA,yBAGpBV,eAAe,CAAC,QAAD,EAAW,EAAX,CAHK;AAAA;AAAA,MAGhCW,QAHgC;AAKzC;AACF;AACA;AACA;AACA;;;AACE,MAAMC,QAAQ;AAAA,wEAAG,iBAAOC,OAAP,EAAgBC,KAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACVD,OADU;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAGTE,cAAAA,GAHS,GAGHF,OAAO,CAACG,WAAR,EAHG;;AAAA,kBAKVF,KALU;AAAA;AAAA;AAAA;;AAMbH,cAAAA,QAAQ,CAAC,UAACM,OAAD,EAAa;AACpB,oBAAIC,GAAG,GAAGD,OAAV;AACA,uBAAOC,GAAG,CAACH,GAAD,CAAV;AACA,uBAAOG,GAAP;AACD,eAJO,CAAR;AAMIC,cAAAA,OAZS,GAYCV,IAZD;AAab,qBAAOU,OAAO,CAACJ,GAAD,CAAd;AAba;AAAA,qBAcPL,MAAM,CAACS,OAAD,CAdC;;AAAA;AAAA;AAAA;;AAAA;AAgBbR,cAAAA,QAAQ,CAAC,UAACM,OAAD;AAAA,uDAAmBA,OAAnB,2BAA6BF,GAA7B,EAAmCD,KAAnC;AAAA,eAAD,CAAR;AAhBa;AAAA,qBAkBPJ,MAAM,iCAAMD,IAAN,2BAAaM,GAAb,EAAmBD,KAAnB,GAlBC;;AAAA;AAAA;AAAA,qBAqBTJ,MAAM,EArBG;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAARE,QAAQ;AAAA;AAAA;AAAA,KAAd;AAwBA;AACF;AACA;AACA;AACA;;;AACE,MAAMQ,QAAQ,GAAG,SAAXA,QAAW,CAACP,OAAD,EAAa;AAC5B,QAAI,CAACA,OAAL,EAAc;AAEd,QAAME,GAAG,GAAGF,OAAO,CAACG,WAAR,EAAZ;AACA,QAAIP,IAAI,IAAIY,MAAM,CAACC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCf,IAArC,EAA2CM,GAA3C,CAAZ,EACE,OAAON,IAAI,CAACM,GAAD,CAAX;AACF,WAAOU,SAAP;AACD,GAPD;;AASA,SAAO;AAAEC,IAAAA,MAAM,EAAEjB,IAAV;AAAgBG,IAAAA,QAAQ,EAARA,QAAhB;AAA0BQ,IAAAA,QAAQ,EAARA;AAA1B,GAAP;AACD;;GAjDuBZ,gB;UACGP,M,EAEJD,e","sourcesContent":["import { useLocalStorage } from \"react-use\";\nimport useSWR from \"swr\";\n\nconst fetcher = () => {\n  const raw = localStorage.getItem(\"labels\");\n  return JSON.parse(raw);\n};\n\nexport default function useAddressLabels() {\n  const { data, mutate } = useSWR(\"labels\", fetcher);\n\n  const [, setValue] = useLocalStorage(\"labels\", {});\n\n  /**\n   * @name setLabel\n   * @param {String} address\n   * @param {String} label\n   */\n  const setLabel = async (address, label) => {\n    if (!address) return;\n\n    const key = address.toLowerCase();\n\n    if (!label) {\n      setValue((current) => {\n        let cur = current;\n        delete cur[key];\n        return cur;\n      });\n\n      let curData = data;\n      delete curData[key];\n      await mutate(curData);\n    } else {\n      setValue((current) => ({ ...current, [key]: label }));\n\n      await mutate({ ...data, [key]: label });\n    }\n\n    await mutate();\n  };\n\n  /**\n   * @name getLabel\n   * @param {String} address\n   * @returns {String|undefined}\n   */\n  const getLabel = (address) => {\n    if (!address) return;\n\n    const key = address.toLowerCase();\n    if (data && Object.prototype.hasOwnProperty.call(data, key))\n      return data[key];\n    return undefined;\n  };\n\n  return { labels: data, setLabel, getLabel };\n}\n"]},"metadata":{},"sourceType":"module"}