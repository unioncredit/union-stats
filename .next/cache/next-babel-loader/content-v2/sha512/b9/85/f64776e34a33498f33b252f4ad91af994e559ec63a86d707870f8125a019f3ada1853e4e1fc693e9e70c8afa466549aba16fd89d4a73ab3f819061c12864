{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/Users/mathewstokes/Desktop/stats-app/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/mathewstokes/Desktop/stats-app/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/Users/mathewstokes/Desktop/stats-app/components-ui/SignInCard.js\",\n    _this = this,\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { Skeleton, ButtonRow, Card, Button, Text, Label, Heading } from \"@unioncredit/ui\";\nimport { UnsupportedChainIdError, useWeb3React } from \"@web3-react/core\";\nimport { useAutoEffect } from \"hooks.macro\";\nimport useEagerConnect from \"hooks/useEagerConnect\";\nimport useIsSanctioned from \"hooks/useIsSanctioned\";\nimport { login } from \"lib/auth\";\nimport { useRouter } from \"next/router\";\nimport { Fragment, useState } from \"react\";\nimport { getWalletName, getWalletIcon } from \"util/formatWalletDetails\";\nimport { NetworkSwitcher } from \"./NetworkSwitcher\";\n\nvar WalletOptions = function WalletOptions(_ref) {\n  _s();\n\n  var activatingConnector = _ref.activatingConnector,\n      setActivatingConnector = _ref.setActivatingConnector,\n      triedEager = _ref.triedEager;\n\n  var _useWeb3React = useWeb3React(),\n      error = _useWeb3React.error,\n      activate = _useWeb3React.activate,\n      connector = _useWeb3React.connector;\n\n  var isSanctioned = useIsSanctioned();\n  var router = useRouter();\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: Object.keys(CONNECTORS).map(function (name) {\n      var _window, _window2;\n\n      var currentConnector = CONNECTORS[name];\n      var activating = currentConnector === activatingConnector;\n      var connected = currentConnector === connector;\n      var disabled = Boolean(!triedEager || !!activatingConnector || connected || !!error || isSanctioned);\n\n      var handleSignIn = /*#__PURE__*/function () {\n        var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  setActivatingConnector(currentConnector);\n                  _context.next = 3;\n                  return activate(CONNECTORS[name]);\n\n                case 3:\n                  if (name === \"Injected\") {\n                    login();\n                  }\n\n                  if (router.pathname === \"/\") router.push(\"/stake\");\n\n                case 5:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        return function handleSignIn() {\n          return _ref2.apply(this, arguments);\n        };\n      }();\n\n      if (true && name === \"Injected\" && !((_window = window) !== null && _window !== void 0 && _window.ethereum || (_window2 = window) !== null && _window2 !== void 0 && _window2.web3)) {\n        return null;\n      }\n\n      return /*#__PURE__*/_jsxDEV(ButtonRow, {\n        mb: \"4px\",\n        direction: \"vertical\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"secondary\",\n          icon: getWalletIcon(name),\n          label: getWalletName(name),\n          onClick: handleSignIn,\n          disabled: disabled,\n          fontSize: \"large\",\n          loading: activating\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 13\n        }, _this)\n      }, name, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 11\n      }, _this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(WalletOptions, \"KI9WXwDbHVpEp2TP3o0uS2UAkoQ=\", false, function () {\n  return [useWeb3React, useIsSanctioned, useRouter];\n});\n\n_c = WalletOptions;\nexport var SignInCard = function SignInCard() {\n  _s2();\n\n  var _useWeb3React2 = useWeb3React(),\n      error = _useWeb3React2.error,\n      connector = _useWeb3React2.connector,\n      deactivate = _useWeb3React2.deactivate;\n\n  var _useState = useState(),\n      activatingConnector = _useState[0],\n      setActivatingConnector = _useState[1];\n\n  useAutoEffect(function () {\n    if (activatingConnector && activatingConnector === connector) {\n      setActivatingConnector(undefined);\n    }\n  });\n  /**\n   * Handle disconnecting from the wallet if an error occurs\n   */\n\n  useAutoEffect(function () {\n    if (error) {\n      if (connector === walletconnect) connector.close();\n\n      if (!(error instanceof UnsupportedChainIdError)) {\n        deactivate();\n        setActivatingConnector(undefined);\n      }\n    }\n  });\n  var triedEager = useEagerConnect();\n\n  if (!triedEager) {\n    return /*#__PURE__*/_jsxDEV(Card, {\n      size: \"small\",\n      children: /*#__PURE__*/_jsxDEV(Card.Body, {\n        children: [/*#__PURE__*/_jsxDEV(Skeleton, {\n          size: \"large\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(Skeleton, {\n          size: \"small\",\n          variant: \"secondary\",\n          w: \"100%\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(Skeleton, {\n          size: \"small\",\n          variant: \"secondary\",\n          w: \"100%\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(Skeleton, {\n          size: \"large\",\n          variant: \"secondary\",\n          w: \"100%\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(Skeleton, {\n          size: \"small\",\n          variant: \"secondary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, _this);\n  }\n\n  var isUnsupportedChainId = error instanceof UnsupportedChainIdError;\n  return /*#__PURE__*/_jsxDEV(Card, {\n    size: \"small\",\n    children: /*#__PURE__*/_jsxDEV(Card.Body, {\n      children: [/*#__PURE__*/_jsxDEV(Heading, {\n        mb: \"8px\",\n        children: \"Log In\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }, _this), isUnsupportedChainId ? /*#__PURE__*/_jsxDEV(NetworkSwitcher, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 11\n      }, _this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Text, {\n          mb: \"12px\",\n          children: [\"Connect your wallet with one of the available wallet providers.\", \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(WalletOptions, {\n          activatingConnector: activatingConnector,\n          setActivatingConnector: setActivatingConnector,\n          triedEager: triedEager\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(Label, {\n          mt: \"8px\",\n          mb: \"0\",\n          as: \"p\",\n          size: \"small\",\n          grey: 400,\n          children: \"Union never has access to your private keys and we\\u2019ll never ask for them.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 13\n        }, _this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 126,\n    columnNumber: 5\n  }, _this);\n};\n\n_s2(SignInCard, \"0dIH9+6lx1nt5djOz2NWmeVjG9Y=\", false, function () {\n  return [useWeb3React, useAutoEffect, useAutoEffect, useEagerConnect];\n});\n\n_c2 = SignInCard;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"WalletOptions\");\n$RefreshReg$(_c2, \"SignInCard\");","map":{"version":3,"sources":["/Users/mathewstokes/Desktop/stats-app/components-ui/SignInCard.js"],"names":["Skeleton","ButtonRow","Card","Button","Text","Label","Heading","UnsupportedChainIdError","useWeb3React","useAutoEffect","useEagerConnect","useIsSanctioned","login","useRouter","Fragment","useState","getWalletName","getWalletIcon","NetworkSwitcher","WalletOptions","activatingConnector","setActivatingConnector","triedEager","error","activate","connector","isSanctioned","router","Object","keys","CONNECTORS","map","name","currentConnector","activating","connected","disabled","Boolean","handleSignIn","pathname","push","window","ethereum","web3","SignInCard","deactivate","undefined","walletconnect","close","isUnsupportedChainId"],"mappings":";;;;;;;;;;AAAA,SACEA,QADF,EAEEC,SAFF,EAGEC,IAHF,EAIEC,MAJF,EAKEC,IALF,EAMEC,KANF,EAOEC,OAPF,QAQO,iBARP;AASA,SAASC,uBAAT,EAAkCC,YAAlC,QAAsD,kBAAtD;AACA,SAASC,aAAT,QAA8B,aAA9B;AACA,OAAOC,eAAP,MAA4B,uBAA5B;AACA,OAAOC,eAAP,MAA4B,uBAA5B;AACA,SAASC,KAAT,QAAsB,UAAtB;AACA,SAASC,SAAT,QAA0B,aAA1B;AACA,SAASC,QAAT,EAAmBC,QAAnB,QAAmC,OAAnC;AACA,SAASC,aAAT,EAAwBC,aAAxB,QAA6C,0BAA7C;AACA,SAASC,eAAT,QAAgC,mBAAhC;;AAEA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,OAIhB;AAAA;;AAAA,MAHJC,mBAGI,QAHJA,mBAGI;AAAA,MAFJC,sBAEI,QAFJA,sBAEI;AAAA,MADJC,UACI,QADJA,UACI;;AAAA,sBACmCd,YAAY,EAD/C;AAAA,MACIe,KADJ,iBACIA,KADJ;AAAA,MACWC,QADX,iBACWA,QADX;AAAA,MACqBC,SADrB,iBACqBA,SADrB;;AAGJ,MAAMC,YAAY,GAAGf,eAAe,EAApC;AACA,MAAMgB,MAAM,GAAGd,SAAS,EAAxB;AAEA,sBACE,QAAC,QAAD;AAAA,cACGe,MAAM,CAACC,IAAP,CAAYC,UAAZ,EAAwBC,GAAxB,CAA4B,UAACC,IAAD,EAAU;AAAA;;AACrC,UAAMC,gBAAgB,GAAGH,UAAU,CAACE,IAAD,CAAnC;AACA,UAAME,UAAU,GAAGD,gBAAgB,KAAKb,mBAAxC;AACA,UAAMe,SAAS,GAAGF,gBAAgB,KAAKR,SAAvC;AACA,UAAMW,QAAQ,GAAGC,OAAO,CACtB,CAACf,UAAD,IACE,CAAC,CAACF,mBADJ,IAEEe,SAFF,IAGE,CAAC,CAACZ,KAHJ,IAIEG,YALoB,CAAxB;;AAQA,UAAMY,YAAY;AAAA,6EAAG;AAAA;AAAA;AAAA;AAAA;AACnBjB,kBAAAA,sBAAsB,CAACY,gBAAD,CAAtB;AADmB;AAAA,yBAGbT,QAAQ,CAACM,UAAU,CAACE,IAAD,CAAX,CAHK;;AAAA;AAKnB,sBAAIA,IAAI,KAAK,UAAb,EAAyB;AACvBpB,oBAAAA,KAAK;AACN;;AAED,sBAAIe,MAAM,CAACY,QAAP,KAAoB,GAAxB,EAA6BZ,MAAM,CAACa,IAAP,CAAY,QAAZ;;AATV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAH;;AAAA,wBAAZF,YAAY;AAAA;AAAA;AAAA,SAAlB;;AAYA,UACE,QACAN,IAAI,KAAK,UADT,IAEA,EAAE,WAAAS,MAAM,UAAN,kCAAQC,QAAR,gBAAoBD,MAApB,qCAAoB,SAAQE,IAA9B,CAHF,EAIE;AACA,eAAO,IAAP;AACD;;AAED,0BACE,QAAC,SAAD;AAAsB,QAAA,EAAE,EAAC,KAAzB;AAA+B,QAAA,SAAS,EAAC,UAAzC;AAAA,+BACE,QAAC,MAAD;AACE,UAAA,OAAO,EAAC,WADV;AAEE,UAAA,IAAI,EAAE1B,aAAa,CAACe,IAAD,CAFrB;AAGE,UAAA,KAAK,EAAEhB,aAAa,CAACgB,IAAD,CAHtB;AAIE,UAAA,OAAO,EAAEM,YAJX;AAKE,UAAA,QAAQ,EAAEF,QALZ;AAME,UAAA,QAAQ,EAAC,OANX;AAOE,UAAA,OAAO,EAAEF;AAPX;AAAA;AAAA;AAAA;AAAA;AADF,SAAgBF,IAAhB;AAAA;AAAA;AAAA;AAAA,eADF;AAaD,KA7CA;AADH;AAAA;AAAA;AAAA;AAAA,WADF;AAkDD,CA5DD;;GAAMb,a;UAKmCX,Y,EAElBG,e,EACNE,S;;;KARXM,a;AA8DN,OAAO,IAAMyB,UAAU,GAAG,SAAbA,UAAa,GAAM;AAAA;;AAAA,uBACWpC,YAAY,EADvB;AAAA,MACtBe,KADsB,kBACtBA,KADsB;AAAA,MACfE,SADe,kBACfA,SADe;AAAA,MACJoB,UADI,kBACJA,UADI;;AAAA,kBAGwB9B,QAAQ,EAHhC;AAAA,MAGvBK,mBAHuB;AAAA,MAGFC,sBAHE;;AAK9BZ,EAAAA,aAAa,CAAC,YAAM;AAClB,QAAIW,mBAAmB,IAAIA,mBAAmB,KAAKK,SAAnD,EAA8D;AAC5DJ,MAAAA,sBAAsB,CAACyB,SAAD,CAAtB;AACD;AACF,GAJY,CAAb;AAMA;AACF;AACA;;AACErC,EAAAA,aAAa,CAAC,YAAM;AAClB,QAAIc,KAAJ,EAAW;AACT,UAAIE,SAAS,KAAKsB,aAAlB,EAAiCtB,SAAS,CAACuB,KAAV;;AAEjC,UAAI,EAAEzB,KAAK,YAAYhB,uBAAnB,CAAJ,EAAiD;AAC/CsC,QAAAA,UAAU;AACVxB,QAAAA,sBAAsB,CAACyB,SAAD,CAAtB;AACD;AACF;AACF,GATY,CAAb;AAWA,MAAMxB,UAAU,GAAGZ,eAAe,EAAlC;;AAEA,MAAI,CAACY,UAAL,EAAiB;AACf,wBACE,QAAC,IAAD;AAAM,MAAA,IAAI,EAAC,OAAX;AAAA,6BACE,QAAC,IAAD,CAAM,IAAN;AAAA,gCACE,QAAC,QAAD;AAAU,UAAA,IAAI,EAAC;AAAf;AAAA;AAAA;AAAA;AAAA,iBADF,eAEE,QAAC,QAAD;AAAU,UAAA,IAAI,EAAC,OAAf;AAAuB,UAAA,OAAO,EAAC,WAA/B;AAA2C,UAAA,CAAC,EAAC;AAA7C;AAAA;AAAA;AAAA;AAAA,iBAFF,eAGE,QAAC,QAAD;AAAU,UAAA,IAAI,EAAC,OAAf;AAAuB,UAAA,OAAO,EAAC,WAA/B;AAA2C,UAAA,CAAC,EAAC;AAA7C;AAAA;AAAA;AAAA;AAAA,iBAHF,eAIE,QAAC,QAAD;AAAU,UAAA,IAAI,EAAC,OAAf;AAAuB,UAAA,OAAO,EAAC,WAA/B;AAA2C,UAAA,CAAC,EAAC;AAA7C;AAAA;AAAA;AAAA;AAAA,iBAJF,eAKE,QAAC,QAAD;AAAU,UAAA,IAAI,EAAC,OAAf;AAAuB,UAAA,OAAO,EAAC;AAA/B;AAAA;AAAA;AAAA;AAAA,iBALF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,aADF;AAWD;;AAED,MAAM2B,oBAAoB,GAAG1B,KAAK,YAAYhB,uBAA9C;AAEA,sBACE,QAAC,IAAD;AAAM,IAAA,IAAI,EAAC,OAAX;AAAA,2BACE,QAAC,IAAD,CAAM,IAAN;AAAA,8BACE,QAAC,OAAD;AAAS,QAAA,EAAE,EAAC,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,EAEG0C,oBAAoB,gBACnB,QAAC,eAAD;AAAA;AAAA;AAAA;AAAA,eADmB,gBAGnB;AAAA,gCACE,QAAC,IAAD;AAAM,UAAA,EAAE,EAAC,MAAT;AAAA,wFACkE,GADlE;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,eAIE,QAAC,aAAD;AACE,UAAA,mBAAmB,EAAE7B,mBADvB;AAEE,UAAA,sBAAsB,EAAEC,sBAF1B;AAGE,UAAA,UAAU,EAAEC;AAHd;AAAA;AAAA;AAAA;AAAA,iBAJF,eASE,QAAC,KAAD;AAAO,UAAA,EAAE,EAAC,KAAV;AAAgB,UAAA,EAAE,EAAC,GAAnB;AAAuB,UAAA,EAAE,EAAC,GAA1B;AAA8B,UAAA,IAAI,EAAC,OAAnC;AAA2C,UAAA,IAAI,EAAE,GAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBATF;AAAA,sBALJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,WADF;AAyBD,CApEM;;IAAMsB,U;UAC8BpC,Y,EAIzCC,a,EASAA,a,EAWmBC,e;;;MAzBRkC,U","sourcesContent":["import {\n  Skeleton,\n  ButtonRow,\n  Card,\n  Button,\n  Text,\n  Label,\n  Heading,\n} from \"@unioncredit/ui\";\nimport { UnsupportedChainIdError, useWeb3React } from \"@web3-react/core\";\nimport { useAutoEffect } from \"hooks.macro\";\nimport useEagerConnect from \"hooks/useEagerConnect\";\nimport useIsSanctioned from \"hooks/useIsSanctioned\";\nimport { login } from \"lib/auth\";\nimport { useRouter } from \"next/router\";\nimport { Fragment, useState } from \"react\";\nimport { getWalletName, getWalletIcon } from \"util/formatWalletDetails\";\nimport { NetworkSwitcher } from \"./NetworkSwitcher\";\n\nconst WalletOptions = ({\n  activatingConnector,\n  setActivatingConnector,\n  triedEager,\n}) => {\n  const { error, activate, connector } = useWeb3React();\n\n  const isSanctioned = useIsSanctioned();\n  const router = useRouter();\n\n  return (\n    <Fragment>\n      {Object.keys(CONNECTORS).map((name) => {\n        const currentConnector = CONNECTORS[name];\n        const activating = currentConnector === activatingConnector;\n        const connected = currentConnector === connector;\n        const disabled = Boolean(\n          !triedEager ||\n            !!activatingConnector ||\n            connected ||\n            !!error ||\n            isSanctioned\n        );\n\n        const handleSignIn = async () => {\n          setActivatingConnector(currentConnector);\n\n          await activate(CONNECTORS[name]);\n\n          if (name === \"Injected\") {\n            login();\n          }\n\n          if (router.pathname === \"/\") router.push(\"/stake\");\n        };\n\n        if (\n          typeof window !== \"undefined\" &&\n          name === \"Injected\" &&\n          !(window?.ethereum || window?.web3)\n        ) {\n          return null;\n        }\n\n        return (\n          <ButtonRow key={name} mb=\"4px\" direction=\"vertical\">\n            <Button\n              variant=\"secondary\"\n              icon={getWalletIcon(name)}\n              label={getWalletName(name)}\n              onClick={handleSignIn}\n              disabled={disabled}\n              fontSize=\"large\"\n              loading={activating}\n            />\n          </ButtonRow>\n        );\n      })}\n    </Fragment>\n  );\n};\n\nexport const SignInCard = () => {\n  const { error, connector, deactivate } = useWeb3React();\n\n  const [activatingConnector, setActivatingConnector] = useState();\n\n  useAutoEffect(() => {\n    if (activatingConnector && activatingConnector === connector) {\n      setActivatingConnector(undefined);\n    }\n  });\n\n  /**\n   * Handle disconnecting from the wallet if an error occurs\n   */\n  useAutoEffect(() => {\n    if (error) {\n      if (connector === walletconnect) connector.close();\n\n      if (!(error instanceof UnsupportedChainIdError)) {\n        deactivate();\n        setActivatingConnector(undefined);\n      }\n    }\n  });\n\n  const triedEager = useEagerConnect();\n\n  if (!triedEager) {\n    return (\n      <Card size=\"small\">\n        <Card.Body>\n          <Skeleton size=\"large\" />\n          <Skeleton size=\"small\" variant=\"secondary\" w=\"100%\" />\n          <Skeleton size=\"small\" variant=\"secondary\" w=\"100%\" />\n          <Skeleton size=\"large\" variant=\"secondary\" w=\"100%\" />\n          <Skeleton size=\"small\" variant=\"secondary\" />\n        </Card.Body>\n      </Card>\n    );\n  }\n\n  const isUnsupportedChainId = error instanceof UnsupportedChainIdError;\n\n  return (\n    <Card size=\"small\">\n      <Card.Body>\n        <Heading mb=\"8px\">Log In</Heading>\n        {isUnsupportedChainId ? (\n          <NetworkSwitcher />\n        ) : (\n          <>\n            <Text mb=\"12px\">\n              Connect your wallet with one of the available wallet providers.{\" \"}\n            </Text>\n            <WalletOptions\n              activatingConnector={activatingConnector}\n              setActivatingConnector={setActivatingConnector}\n              triedEager={triedEager}\n            />\n            <Label mt=\"8px\" mb=\"0\" as=\"p\" size=\"small\" grey={400}>\n              Union never has access to your private keys and weâ€™ll never ask\n              for them.\n            </Label>\n          </>\n        )}\n      </Card.Body>\n    </Card>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}