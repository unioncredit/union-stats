{"ast":null,"code":"import _defineProperty from \"/Users/mathewstokes/Desktop/stats-app/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"/Users/mathewstokes/Desktop/stats-app/node_modules/next/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\n\nvar _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useEffect } from \"react\";\nimport { newRidgeState } from \"react-ridge-state\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport { useAutoCallback } from \"hooks.macro\";\nvar MAX_SIZE = 8;\nvar activityStorageKey = \"union:activity\";\nvar initialState = true ? JSON.parse(localStorage.getItem(activityStorageKey)) : {};\nvar activityState = newRidgeState(initialState);\nexport var addActivity = function addActivity(chainId, address) {\n  return function (activity) {\n    var key = [chainId, address].toString();\n\n    var getUpdatedState = function getUpdatedState(stateSlice, activity) {\n      if (!stateSlice) return [activity];\n\n      if (stateSlice.length >= MAX_SIZE) {\n        return [activity].concat(_toConsumableArray(stateSlice.slice(0, MAX_SIZE - 1)));\n      }\n\n      return [activity].concat(_toConsumableArray(stateSlice));\n    };\n\n    activityState.set(function (state) {\n      var stateSlice = state === null || state === void 0 ? void 0 : state[key];\n      var updatedChainState = getUpdatedState(stateSlice, activity);\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, key, updatedChainState));\n    });\n  };\n};\nexport var clearActivity = function clearActivity(chainId, address) {\n  var key = [chainId, address].toString();\n  activityState.set(function (state) {\n    return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, key, []));\n  });\n};\nexport function useAddActivity() {\n  _s();\n\n  var _useWeb3React = useWeb3React(),\n      chainId = _useWeb3React.chainId,\n      account = _useWeb3React.account;\n\n  return useAutoCallback(function (activity) {\n    return chainId && addActivity(chainId, account)(activity);\n  });\n}\n\n_s(useAddActivity, \"oGiAolw0imFhn+nb5ALZVtYwsqU=\", false, function () {\n  return [useWeb3React, useAutoCallback];\n});\n\nexport function useClearActivity() {\n  _s2();\n\n  var _useWeb3React2 = useWeb3React(),\n      chainId = _useWeb3React2.chainId,\n      account = _useWeb3React2.account;\n\n  return useAutoCallback(function () {\n    return chainId && clearActivity(chainId, account);\n  });\n}\n\n_s2(useClearActivity, \"oGiAolw0imFhn+nb5ALZVtYwsqU=\", false, function () {\n  return [useWeb3React, useAutoCallback];\n});\n\nexport default function useActivity() {\n  _s3();\n\n  var _useWeb3React3 = useWeb3React(),\n      chainId = _useWeb3React3.chainId,\n      account = _useWeb3React3.account;\n\n  var activity = activityState.useValue();\n  useEffect(function () {\n    if (!chainId) return;\n\n    if (true) {\n      window.localStorage.setItem(activityStorageKey, JSON.stringify(activity));\n    }\n  }, [activity, chainId]);\n  return activity && chainId && activity[[chainId, account]];\n}\n\n_s3(useActivity, \"Jnid2H8/K0i0T2EC1k6lF8pegYY=\", false, function () {\n  return [useWeb3React, activityState.useValue];\n});","map":{"version":3,"sources":["/Users/mathewstokes/Desktop/stats-app/hooks/data/useActivity.js"],"names":["useEffect","newRidgeState","useWeb3React","useAutoCallback","MAX_SIZE","activityStorageKey","initialState","JSON","parse","localStorage","getItem","activityState","addActivity","chainId","address","activity","key","toString","getUpdatedState","stateSlice","length","slice","set","state","updatedChainState","clearActivity","useAddActivity","account","useClearActivity","useActivity","useValue","window","setItem","stringify"],"mappings":"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","sourcesContent":["import { useEffect } from \"react\";\nimport { newRidgeState } from \"react-ridge-state\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport { useAutoCallback } from \"hooks.macro\";\n\nconst MAX_SIZE = 8;\nconst activityStorageKey = \"union:activity\";\n\nconst initialState =\n  typeof window !== \"undefined\"\n    ? JSON.parse(localStorage.getItem(activityStorageKey))\n    : {};\n\nconst activityState = newRidgeState(initialState);\n\nexport const addActivity = (chainId, address) => (activity) => {\n  const key = [chainId, address].toString();\n\n  const getUpdatedState = (stateSlice, activity) => {\n    if (!stateSlice) return [activity];\n    if (stateSlice.length >= MAX_SIZE) {\n      return [activity, ...stateSlice.slice(0, MAX_SIZE - 1)];\n    }\n    return [activity, ...stateSlice];\n  };\n\n  activityState.set((state) => {\n    const stateSlice = state?.[key];\n    const updatedChainState = getUpdatedState(stateSlice, activity);\n    return { ...state, [key]: updatedChainState };\n  });\n};\n\nexport const clearActivity = (chainId, address) => {\n  const key = [chainId, address].toString();\n  activityState.set((state) => ({ ...state, [key]: [] }));\n};\n\nexport function useAddActivity() {\n  const { chainId, account } = useWeb3React();\n  return useAutoCallback(\n    (activity) => chainId && addActivity(chainId, account)(activity)\n  );\n}\n\nexport function useClearActivity() {\n  const { chainId, account } = useWeb3React();\n  return useAutoCallback(() => chainId && clearActivity(chainId, account));\n}\n\nexport default function useActivity() {\n  const { chainId, account } = useWeb3React();\n  const activity = activityState.useValue();\n\n  useEffect(() => {\n    if (!chainId) return;\n    if (typeof window !== \"undefined\") {\n      window.localStorage.setItem(activityStorageKey, JSON.stringify(activity));\n    }\n  }, [activity, chainId]);\n\n  return activity && chainId && activity[[chainId, account]];\n}\n"]},"metadata":{},"sourceType":"module"}